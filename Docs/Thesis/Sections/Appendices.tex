\documentclass[../main]{subfiles}
\graphicspath{{\subfix{../Images/}}}

\begin{document}

\section*{Załącznik nr 1: System wbudowany}\addcontentsline{toc}{section}{Załącznik nr 1: System wbudowany}\label{sec:zalacznik-1}

Skoro nie ma jednoznacznej definicji pojęcia "system wbudowany" - należy określić definicję, która jest
wykorzystywana w tej pracę.

System wbudowany jest systemem, to znaczy ma cechy systemu: jest złożony z więcej niż jednego elementu,
jest funkcjonalnie niezależny od środowiska (tzn. może być wyodrębniony ze środowiska) i posiada
możliwość reagowania (tzn. odbierania, przetwarzania i odpowiedzi) % TODO: odbierania? możliwość?
na bodźce zewnętrzne. "wbudowany" oznacza, że system jest częścią innego systemu fizycznie i/lub
funkcjonalnie.

Natomiast przełożyć tą definicję na dziedzinę elektroniki i informatyki można w następujący sposób:
system wbudowany — jest to system komputerowy składający się z jednostki obliczeniowej i modułów
wejścia/wyjścia (tzn. może reagować na bodźce zewnętrzne), mający wszystkie narzędzia (w tym
oprogramowanie) dla spełnienia pewnej, zdefiniowanej funkcji (więc może być wyodrębniony) i będący
częścią większego systemu.
% TODO: Nie cytuję tu rzadnej książki ani normy, bazuję sie na swojej wiedzę, ale agólnie ta definicja jest podobna od książki do książki.

\section*{Załącznik nr 2: ARM TrustZone}\addcontentsline{toc}{section}{Załącznik nr 2: ARM TrustZone}\label{sec:zalacznik-2}
\begin{figure}
    \centering
    \includegraphics[width=0.95\textwidth]{Images/trustzone-m.png}
    \caption{TrustZone dla architektury \acrshort{arm} v8-M}
    \label{fig:trustzone-m}
\end{figure}
\begin{figure}
    \centering
    \includegraphics[width=0.95\textwidth]{Images/trustzone-a.png}
    \caption{TrustZone dla architektury \acrshort{arm} v8-A}
    \label{fig:trustzone-a}
\end{figure}

Koncept technologi TrustZone bazuję się na podziale sprzętowym środowiska (pamięci i innych zasobów) na
środowisko zaufane i niezaufane (\cref{fig:trustzone-m} i
\cref{fig:trustzone-a}), co jest robione za pomocą rozszerzeń do architektur ARMv8-A i
ARMv8-M dotyczących \acrshort{bsa} i \acrshort{isa}.

Dla architektury ARMv8-A został dodany \acrshort{el}3, w którym jest zamieszczony monitor bezpieczeństwa
(\cref{fig:trustzone-a}), realizowany przez oprogramowanie \acrshort{arm}'owe Trusted
Firmware A (referencyjna implementacja monitoru bezpieczeństwa). Faktycznie ten monitor bezpieczeństwa
jest pewnym mostem przekazującym polecenia ze środowiska niezaufanego do środowiska zaufanego oraz
przełączający procesor w bezpieczny tryb za pomocą \acrshort{smccc}.
\cite{smccc}\cite{trustzoneaarch64} % TODO: automatic images indexing

Dla architektury ARMv8-M zostały dodane rozszerzenia pozwalające na separację środowiska zaufanego od
niezaufanego (\cref{fig:trustzone-m}) za pomocą modułów \acrshort{sau} i \acrshort{idau},
oraz instrukcji dla komunikacji pomiędzy środowiskami: \acrshort{isa} SG, BXNS i BLXNS.
\cite{trustzonearmv8m}

\section*{Załącznik nr 3: Wirtualizacja}\addcontentsline{toc}{section}{Załącznik nr 3: Wirtualzacja}\label{sec:zalacznik-3}

Wirtualizacja jest technologią wprowadzającą separację środowisk z oprogramowaniem poprzez tworzenie tzw. \acrshort{vm} zarządzanych przez \acrshort{vmm}.

VM posiada listę cech, które określają wytyczne do oprogramowania uruchomianego wewnątrz:
\begin{itemize}
    \item VM ma przepisany przedział pamięci RAM dostępny dla oprogramowania, ten przedział jest
    mniejszy niż pamieć RAM całego urządzenia, skoro w pamięci urządzenia rezyduję też hiperwizor,
    oraz, najprawdopodobniej, inne VM. Próba otrzymania dostępu do pamięci spoza zdefiniowanego
    przedziału powoduje wygenerowanie wyjątku, przechwytywanego hiperwizorem.
    \item VM ma przepisany zbiór lub podzbiór urządzeń peryferyjnych, dostęp do których jest
    współdzielony z innymi VM'ami, i jest zarządzany przez hiperwizor.
    \item VM ma przepisaną pewną ilość zasobów obliczeniowych.
    \item Wszystkie VM'y są odseparowane od siebie, i jakakolwiek komunikacja pomiędzy nimi jest
    możliwa tylko w ściśle zdefiniowany przez hiperwizora sposób.
\end{itemize}

Wyżej wymienione cechy pozwalają na użycie wirtualizacji w dużej ilości rozwiązaniach systemów
wbudowanych (za co też trzeba podziękować progres, dodający rozszerzenia sprzętowe), w szczególności w
przypadkach gdzie jest potrzebna separacja oprogramowania ze względów bezpieczeństwa lub ograniczenia
dostępu do zasobów sprzętowych.

\end{document}
